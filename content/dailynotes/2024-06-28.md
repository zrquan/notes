---
title: 2024-06-28
author: ["4shen0ne"]
draft: false
---

## 利用 trim 函数的实现差异绕过 Nginx ACL {#利用-trim-函数的实现差异绕过-nginx-acl}

比如 Nginx 在对 URL 进行标准化处理时，并不会去除 `\x09`, `\xa0`, 和 `\x0c` 这几个特殊
字符，但是 Node.js 的 trim 函数会将它们去除。这就导致以下情况：

Nginx 使用以下配置禁止用户访问 /admin 路径：

```nil
location = /admin {
    deny all;
}

location = /admin/ {
    deny all;
}
```

攻击者可以访问路径 `/admin\x0a` ，由于 Nginx 不会清除 `\x0a` ，所以不会匹配 `location
= /admin` 的规则，Nginx 会放行请求。而如果后端应用是 Node.js，就会把 `\x0a` 清除后
进行处理，导致用户访问了 `/admin` 资源
